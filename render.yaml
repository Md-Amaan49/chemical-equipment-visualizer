services:
  # Django Backend Service
  - type: web
    name: chemical-equipment-backend
    env: python
    buildCommand: "./build.sh"
    startCommand: "gunicorn chemical_equipment_visualizer.wsgi:application"
    plan: free
    envVars:
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: "False"
      - key: CORS_ALLOW_ALL_ORIGINS
        value: "False"
      - key: USE_SQLITE
        value: "True"
    
  # React Frontend Service  
  - type: web
    name: chemical-equipment-frontend
    env: node
    buildCommand: "cd frontend && npm install && npm run build"
    startCommand: "cd frontend && npx serve -s build -p $PORT"
    plan: free
    envVars:
      - key: REACT_APP_API_URL
        value: "https://chemical-equipment-backend-2p9z.onrender.com/api"