# Deployment Guide for Render

This guide will help you deploy the Chemical Equipment Visualizer on Render.

## Prerequisites

1. A Render account (sign up at https://render.com)
2. Your project pushed to GitHub (already done)

## Deployment Steps

### Option 1: Using render.yaml (Recommended)

1. **Connect your GitHub repository to Render:**
   - Go to https://render.com/dashboard
   - Click "New" → "Blueprint"
   - Connect your GitHub account if not already connected
   - Select your repository: `chemical-equipment-visualizer`
   - Render will automatically detect the `render.yaml` file

2. **Review and Deploy:**
   - Render will show you the services that will be created:
     - Backend (Django API)
     - Frontend (React app)
     - Database (PostgreSQL)
   - Click "Apply" to start deployment

### Option 2: Manual Setup

#### Deploy Backend (Django)

1. **Create Web Service:**
   - Go to Render Dashboard
   - Click "New" → "Web Service"
   - Connect your GitHub repository
   - Configure:
     - **Name:** `chemical-equipment-backend`
     - **Environment:** `Python 3`
     - **Build Command:** `./build.sh`
     - **Start Command:** `gunicorn chemical_equipment_visualizer.wsgi:application`
     - **Plan:** Free

2. **Add Environment Variables:**
   - `SECRET_KEY`: Generate a secure secret key
   - `DEBUG`: `False`
   - `CORS_ALLOW_ALL_ORIGINS`: `True`

3. **Add Database:**
   - Create a PostgreSQL database
   - Copy the database URL to your web service environment variables as `DATABASE_URL`

#### Deploy Frontend (React)

1. **Create Web Service:**
   - Click "New" → "Web Service"
   - Connect your GitHub repository
   - Configure:
     - **Name:** `chemical-equipment-frontend`
     - **Environment:** `Node`
     - **Root Directory:** `frontend`
     - **Build Command:** `npm install && npm run build`
     - **Start Command:** `npx serve -s build -p $PORT`
     - **Plan:** Free

2. **Add Environment Variables:**
   - `REACT_APP_API_URL`: Your backend URL (e.g., `https://chemical-equipment-backend.onrender.com/api`)

## Post-Deployment Configuration

1. **Update CORS Settings:**
   - After frontend deployment, update your backend environment variables
   - Add your frontend URL to `CORS_ALLOWED_ORIGINS` in Django settings

2. **Update Frontend API URL:**
   - Update `frontend/.env.production` with your actual backend URL
   - Redeploy the frontend service

3. **Database Migration:**
   - Your backend service will automatically run migrations during deployment
   - Check the deployment logs to ensure migrations completed successfully

## Environment Variables Reference

### Backend Environment Variables
- `SECRET_KEY`: Django secret key (auto-generated by Render)
- `DEBUG`: Set to `False` for production
- `DATABASE_URL`: PostgreSQL connection string (auto-provided by Render)
- `CORS_ALLOW_ALL_ORIGINS`: Set to `True` for development, configure properly for production

### Frontend Environment Variables
- `REACT_APP_API_URL`: Your backend API URL

## Troubleshooting

### Common Issues

1. **Build Failures:**
   - Check build logs in Render dashboard
   - Ensure all dependencies are in requirements.txt
   - Verify build.sh has execute permissions

2. **CORS Errors:**
   - Ensure frontend URL is added to CORS_ALLOWED_ORIGINS
   - Check that CORS_ALLOW_ALL_ORIGINS is set correctly

3. **Database Connection Issues:**
   - Verify DATABASE_URL environment variable is set
   - Check that PostgreSQL service is running

4. **Static Files Not Loading:**
   - Ensure WhiteNoise is configured correctly
   - Check that collectstatic runs during build

## URLs After Deployment

- **Backend API:** `https://chemical-equipment-backend.onrender.com`
- **Frontend App:** `https://chemical-equipment-frontend.onrender.com`
- **Database:** Internal connection (not publicly accessible)

## Notes

- Free tier services may spin down after inactivity
- First request after inactivity may take 30+ seconds to respond
- Consider upgrading to paid plans for production use
- Desktop application cannot be deployed on Render (requires local installation)

## Support

If you encounter issues:
1. Check Render service logs
2. Review Django and React error messages
3. Ensure all environment variables are set correctly
4. Verify database connectivity